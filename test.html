<html>
<head>
  
  <meta http-equiv="Access-Control-Allow-Origin" content="*">
  <header name = "Access-Control-Allow-Origin" value = "*" />

  <style>
    td{
      font-size:24px;
      height:60px;
    }
  </style>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/fetch-jsonp/1.0.6/fetch-jsonp.min.js"></script>

  <script>

	function getJSON(url) {
		var Httpreq = new XMLHttpRequest(); // a new request
		Httpreq.open("GET",url,false);
		Httpreq.send(null);
		return Httpreq.responseText; 
	}

// https://badge.buildkite.com/09e5e28a6a3a8dd422e986e7e71902cf071f1f6af8d715b9cf.json?branch=master

	function bob(json) {
		var o = document.getElementById('myOutput');
		o.innerHTML = json
	}

    function doIt() {

    	//var url = 'https://badge.buildkite.com/09e5e28a6a3a8dd422e986e7e71902cf071f1f6af8d715b9cf.json?branch=master'
    	var url = 'https://badge.buildkite.com/sample.jsonp?status=passing'
  //   	var json = getJSON(url)


		// var json_obj = JSON.parse(json);
		// console.log("this is the author name: "+json_obj.status);

		fetchJsonp(url)
  			.then(res => res.json())
  			.then(json => bob(json));


    }
  </script>

</head>

	<body>

	<form>
	  <button onclick="doIt(); return false;">Click me</button>
	</form>


	<div id="myOutput"></div>

	</body>
</html>